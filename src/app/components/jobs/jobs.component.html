<!-- <mat-grid-list cols="4" rowHeight="90px">
    <mat-grid-tile *ngFor="let tile of tiles" colspan="tile.cols" [rowspan]="tile.rows"
        [style.background]="tile.color">
        {{tile.text}}
    </mat-grid-tile>
</mat-grid-list> -->


<!-- <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px">
    <div fxFlex="100"> -->
<!-- <mat-toolbar>
    <div class="page-title">
        <h1>Jobs</h1>
    </div>
</mat-toolbar> -->

<mat-card>
    <div class="page-title">
        <h2>Jobs</h2>
    </div>
    <!-- <div class="search-div"> -->
    <!-- <mat-grid-list cols="12" rowHeight="90px"> -->
    <!-- <mat-grid-tile colspan="5">
                            <div class="form-container"> -->
    <!-- <mat-form-field class="search-form-field"  >
                                        <input matInput [(ngModel)]="searchKey" placeholder="Search" autocomplete="off" (keyup)="applyFilter()" >
                                        <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey"
                                            (click)="onSearchClear()">
                                            <mat-icon>close</mat-icon>
                                        </button>
                                    </mat-form-field> -->
    <!-- <mat-form-field  appearance="outline">
                                    <mat-label>Search</mat-label>
                                    <input matInput [(ngModel)]="searchKey" placeholder="Search" autocomplete="off"
                                        (keyup)="applyFilter()">
                                    <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey"
                                        (click)="onSearchClear()">
                                        <mat-icon>close</mat-icon>
                                    </button>
                                </mat-form-field>
                            </div>
                        </mat-grid-tile>
                        <mat-grid-tile colspan="1"></mat-grid-tile> -->

    <!-- <mat-grid-tile colspan="9">
            <div class="form-container">
                <mat-form-field  appearance="outline">
                    <mat-label>Search</mat-label>
                    <input matInput [(ngModel)]="searchKey" placeholder="Search" autocomplete="off"
                        (keyup)="applyFilter()">
                    <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey"
                        (click)="onSearchClear()">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="3">
            <div class="form-container">
                <button mat-raised-button color="primary" (click)="jobModel(jobCreateViewEditDialog, 'Create'); jobTypeChange();">
                    <mat-icon>add</mat-icon>New Job
                </button>
            </div>
        </mat-grid-tile>
    </mat-grid-list> -->



    <mat-grid-list cols="4" rowHeight="90px">
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                    <mat-label> Job Type </mat-label>
                    <mat-select required [(ngModel)]="tableType" (ngModelChange)="tableTypeChange()">
                        <mat-option *ngFor="let table of tableTypeList" [value]="table.value"> {{ table.name }} </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field *ngIf="tableType!='bapi'" [hideRequiredMarker]="true" appearance="outline">
                    <mat-label> Category Type </mat-label>
                    <mat-select required [(ngModel)]="tableCategoryType" (ngModelChange)="tableTypeChange()">
                        <mat-option value="all"> All Category </mat-option>
                        <div *ngIf="tableType=='extractor'">
                            <mat-option *ngFor="let src of categoryExtractorList" [value]="src.catergoryName"> {{src.catergoryName}} </mat-option>
                        </div>
                        <div *ngIf="tableType=='table'">
                            <mat-option *ngFor="let src of categoryTableList" [value]="src.catergoryName"> {{src.catergoryName}} </mat-option>
                        </div>
                    </mat-select>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field appearance="outline">
                    <mat-label>Search</mat-label>
                    <input matInput [(ngModel)]="searchKey" placeholder="Job Name / Function Name" autocomplete="off"
                        (keyup)="applyFilter()">
                    <!-- <mat-icon matPrefix>favorite</mat-icon>  -->
                    <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey" (click)="onSearchClear()">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <button mat-raised-button color="primary" (click)="jobModel(jobCreateViewEditDialog, 'Create');">
                    <mat-icon>add</mat-icon>New Job
                </button>
            </div>
        </mat-grid-tile>

        <!-- <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field appearance="outline">
                    <mat-label>Search</mat-label>
                    <input matInput [(ngModel)]="searchKey" placeholder="Job Name / Function Name" autocomplete="off"
                        (keyup)="applyFilter()">
                    <mat-icon matPrefix>favorite</mat-icon> 
                    <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey"
                        (click)="onSearchClear()">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
            </div>
        </mat-grid-tile>

        <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field appearance="outline">
                    <mat-label>From Date</mat-label>
                    <input matInput [(ngModel)]="fromDate" [min]="minDate" [matDatepicker]="fromPicker"
                        placeholder="From Date">
                    <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
                    <mat-datepicker #fromPicker></mat-datepicker>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                    <mat-label>To Date</mat-label>
                    <input matInput [(ngModel)]="toDate" [min]="minDate" [matDatepicker]="toPicker"
                        placeholder="To Date">
                    <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
                    <mat-datepicker #toPicker></mat-datepicker>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
            <div class="form-container">
                <button mat-raised-button color="primary" (click)="tableTypeChange()">
                    <mat-icon>search</mat-icon>Search
                </button>
            </div>
        </mat-grid-tile> -->
    </mat-grid-list>


    <!-- </div> -->
    <!-- </mat-card> -->
    <!-- <div class="mat-elevation-z8"> -->
    <div class="table-responsive">
        <table  mat-table [dataSource]="jobsTableData" >

            <!-- S.No Column -->
            <ng-container matColumnDef="#">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> # </th>
                <td mat-cell *matCellDef="let element; let i = index;" style="text-align: left;">
                    {{(this.jobsTableData.paginator.pageIndex * this.jobsTableData.paginator.pageSize)+ i+1}} </td>
            </ng-container>
    
            <!-- description Column -->
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Business Name
                </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;">
                     {{ element.description | uppercase }}  </td>
            </ng-container>
            
            <!-- name Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Job Name </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;"> {{element.name | uppercase}}
                </td>
            </ng-container>
    
            <!-- function Column -->
            <ng-container *ngIf="tableType=='bapi' || tableType=='extractor'" matColumnDef="function">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Function Name
                </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;">
                    {{element.function | uppercase}} </td>
            </ng-container>
    
            <!-- targetType Column -->
            <ng-container *ngIf="tableType=='extractor'" matColumnDef="targetType">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Mode of
                    Extraction </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;">
                    {{element.targetType | uppercase}} </td>
            </ng-container>

            <!-- sourceId Column -->
            <ng-container *ngIf="tableType=='extractor' || tableType=='table'" matColumnDef="sourceId">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Source System
                </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;">
                    {{ getSourceSystemName(element.sourceId) | uppercase }} </td>
            </ng-container>

            <!-- targetName Column -->
            <ng-container *ngIf="tableType=='extractor' || tableType=='table'" matColumnDef="targetName">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Target System
                </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;">
                    {{ getTargetSystemName(element.targetId) | uppercase }} </td>
            </ng-container>
    
            <!-- table Column -->
            <ng-container *ngIf="tableType=='table'" matColumnDef="table">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Table Name </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;"> {{element.table | uppercase}}  </td>
            </ng-container>

            <!-- createdBy Column -->
            <!-- <ng-container *ngIf="userRole!='BUSINESS'" matColumnDef="createdBy">
                <th mat-header-cell *matHeaderCellDef style="text-align: left; color: #2368a0;"> Created By </th>
                <td mat-cell *matCellDef="let element" style="text-align: left;"> {{element.createdBy | uppercase}}  </td>
            </ng-container> -->

    
            <ng-container matColumnDef="actions">
                <!-- <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>  -->
                <th mat-header-cell *matHeaderCellDef style="text-align: center; color: #2368a0;"> Actions </th>
                <!-- <mat-cell *matCellDef="let row"> -->
                <td mat-cell *matCellDef="let element" style="text-align: center;">
                    <button *ngIf="tableType!='bapi'" mat-icon-button color="primary"
                        (click)="selectedJobData=element; jobDataPerview(2,JobDataPerviewDialog);">
                        <mat-icon matTooltip="Preview" matTooltipPosition="above">storage</mat-icon>
                    </button>
                    <button *ngIf="tableType=='bapi'" mat-icon-button color="success"
                        (click)="selectedJobData=element; bapiExecuteModel(executeBapiDialog)">
                        <mat-icon matTooltip="Execute" matTooltipPosition="above">play_arrow</mat-icon>
                    </button>
                    <button *ngIf="tableType!='bapi'" mat-icon-button color="success"
                        (click)="selectedJobData=element; jobModel(jobExecDeleteDialog, 'Execute')">
                        <mat-icon matTooltip="Execute" matTooltipPosition="above">play_arrow</mat-icon>
                    </button>
                    <button mat-icon-button color="primary"
                        (click)="selectedJobData=element; jobModel(jobCreateViewEditDialog, 'View')">
                        <mat-icon matTooltip="View" matTooltipPosition="above">remove_red_eye</mat-icon>
                    </button>
                    <button mat-icon-button (click)="selectedJobData=element; jobModel(jobCreateViewEditDialog, 'Edit')">
                        <mat-icon matTooltip="Edit" matTooltipPosition="above">edit_outline</mat-icon>
                    </button>
                    <button mat-icon-button color="warn"
                        (click)="selectedJobData=element; jobModel(jobExecDeleteDialog, 'Delete')">
                        <mat-icon matTooltip="Delete" matTooltipPosition="above">delete_outline</mat-icon>
                    </button>
    
                    <!-- <a mat-flat-button color="primary" >
                                    <mat-icon>edit</mat-icon>
                                  </a> -->
                </td>
                <!-- </mat-cell> -->
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="jobsHeaders"></tr>
            <tr mat-row *matRowDef="let row; columns: jobsHeaders;"></tr>
        </table>
    </div>
   
    <!-- [pageSizeOptions]="[5, 10, 20]" -->
    <!-- *ngIf="tableLoader" -->
    <img *ngIf="tableLoader" src="../assets/loader.gif" class="loader">
    <mat-paginator #JobPageinator="matPaginator" [hidePageSize]=true [pageSize]="10" showFirstLastButtons></mat-paginator>

    <!-- </div> -->
</mat-card>



<ng-template #jobCreateViewEditDialog>
    <span>
        <button style="float:right;" class="close" mat-button matDialogClose>
            <mat-icon>close</mat-icon>
        </button>
    </span>
    <h2 matDialogTitle style="text-align: center;"><b> {{ modelTitle }} Job</b></h2>
    <img *ngIf="modelloader" src="../assets/loader.gif" class="loader">
    <form *ngIf="!modelloader" [formGroup]="jobForm">
        <mat-dialog-content>
            <mat-grid-list cols="2" rowHeight="90px">
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <!-- [hideRequiredMarker]="true" -->
                        <mat-form-field appearance="outline">
                            <mat-label> Job Type
                                <!-- <mat-icon>favorite</mat-icon>  -->
                            </mat-label>
                            <mat-select required formControlName="jobType" (ngModelChange)="jobTypeChange()"
                                cdkFocusInitial [disabled]="jobTypeDisable">
                                <mat-option *ngFor="let table of tableTypeList" [value]="table.value"> {{ table.name }} </mat-option>
                            </mat-select>
                            <!-- <mat-hint>Hint</mat-hint> -->
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Job Name</mat-label>
                            <input class="inputUppercase" matInput required placeholder="Enter Job Name" formControlName="jobName"
                                [disabled]="jobNameDisable">
                            <!-- [errorStateMatcher]="matcher" -->
                            <!-- <mat-error>
                                <span *ngIf="!jobForm.get('jobName').valid && jobForm.get('jobName').touched">Please
                                    Enter Job Name</span>
                            </mat-error> -->
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Business Name</mat-label>
                            <input class="inputUppercase" matInput required placeholder="Enter Business Name" formControlName="description">
                        </mat-form-field>
                    </div>
                </mat-grid-tile>

                <mat-grid-tile colspan="1" *ngIf="jobForm.value.jobType!='bapi'">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Category Type</mat-label>
                            <!-- (ngModelChange)="filterSourceSystem(jobForm.value.categoryType)" -->
                            <mat-select class="inputUppercase" formControlName="category" >
                                <mat-option value="add" (click)="categoryModel(AddNewCategoey)"><mat-icon>add</mat-icon> ADD NEW CATEGORY</mat-option>
                                <div *ngIf="jobForm.value.jobType=='extractor'">
                                    <mat-option *ngFor="let src of categoryExtractorList" [value]="src.catergoryName"> {{src.catergoryName}} </mat-option>
                                </div>
                                <div *ngIf="jobForm.value.jobType=='table'">
                                    <mat-option *ngFor="let src of categoryTableList" [value]="src.catergoryName"> {{src.catergoryName}} </mat-option>
                                </div>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>

                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Source Type</mat-label>
                            <mat-select formControlName="sourceType" (ngModelChange)="filterSourceSystem(jobForm.value.sourceType)">
                                <mat-option *ngFor="let src of sourcetypeList" [value]="src"> {{src}} </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label> Source System </mat-label>
                            <mat-select required formControlName="sourceSystem"
                                (ngModelChange)="filterFunctions(jobForm.value.sourceSystem)">
                                <mat-option *ngFor="let source of sourceSystemList" [value]="source.id">
                                    {{source.systemId}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                            <mat-label> Target System </mat-label>
                            <mat-select required formControlName="targetSystem">
                                <div *ngIf="jobForm.value.jobType!='bapi'">
                                    <mat-option *ngFor="let target of targetFilesList" [value]="target.id"
                                        (click)="targetSystem=target.targetName.split('_'); test()">
                                        {{ target.targetName }}
                                    </mat-option>
                                </div>
                                <mat-option value="0" (click)="targetSystem=['lf']">Local File</mat-option>
                                <!-- <mat-option value="ftp">FTP</mat-option>
                                                        <mat-option value="db">DataBase</mat-option>
                                                        <mat-option value="lf">Local File</mat-option> -->
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile *ngIf="jobForm.value.jobType!='table'" colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label> Function Name </mat-label>
                            <input class="inputUppercase" matInput type="text" required placeholder="Enter Function Name"
                                formControlName="functionName" [matAutocomplete]="autoFunctionName"
                                (ngModelChange)="getModeofExtractor()">
                            <mat-autocomplete #autoFunctionName="matAutocomplete" style="width: 100%;">
                                <mat-option *ngFor="let fun of filteredFunctionsList | async" [value]="fun"> {{fun}}
                                </mat-option>
                            </mat-autocomplete>
                            <!-- <mat-select required formControlName="functionName">
                                <mat-option *ngFor="let fun of functionList" [value]="fun.value">{{fun.label}}</mat-option>
                            </mat-select> -->
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile *ngIf="jobForm.value.jobType=='extractor'" colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label> Mode of Extractor </mat-label>
                            <mat-select required formControlName="modeOfExtractor">
                                <mat-option *ngFor="let mode of modeOfExtractorList" [value]="mode.value">
                                    {{ mode.label }} </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                
                <!-- <mat-grid-tile *ngIf="jobForm.value.targetSystem!='lf'" colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Target Name</mat-label>
                            <mat-select required formControlName="targetName">
                                <mat-option *ngFor="let target of targetFilesList" [value]="target.id">
                                    {{ jobForm.value.targetSystem == 'ftp'? target.containerName : target.username}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile> -->
                <mat-grid-tile *ngIf="jobForm.value.jobType=='table'" colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Table Name</mat-label>
                            <input class="inputUppercase" matInput type="text" required placeholder="Enter Table Name"
                                formControlName="tableName" [matAutocomplete]="autoTableName"
                                (ngModelChange)="getColumnNameList()">
                            <mat-autocomplete #autoTableName="matAutocomplete">
                                <mat-option *ngFor="let table of filteredTableNameList | async" [value]="table">
                                    {{table}} </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile *ngIf="jobForm.value.jobType=='table'" colspan="2">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Columns</mat-label>
                            <!-- <mat-chip-list #chipList required>
                                                        <mat-chip *ngFor="let column of columnsChipList" selectable [removable]='chipRemove' (removed)="remove(column)">
                                                            {{column}}
                                                            <mat-icon matChipRemove>cancel</mat-icon>
                                                        </mat-chip>
                                                        <input  #columnInput formControlName="columns" [matAutocomplete]="autoColumn"
                                                            [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" matChipInputAddOnBlur>
                                                    </mat-chip-list>
                                                    <mat-autocomplete #autoColumn="matAutocomplete" (optionSelected)="selected($event)">
                                                        <mat-option *ngFor="let column of filteredColumnsList | async" [value]="column">
                                                            {{column}}
                                                        </mat-option>
                                                    </mat-autocomplete> -->

                            <mat-select formControlName="columns" multiple required>
                                <mat-option (click)="toggleSelectAllColumnName()" value="Select All">Select All</mat-option>
                                <mat-option *ngFor="let column of columnsList" [value]="column">{{column}}</mat-option>
                            </mat-select>
                        </mat-form-field>

                    </div>
                </mat-grid-tile>
                <mat-grid-tile *ngIf="jobForm.value.jobType=='table'" colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Rows Count</mat-label>
                            <input matInput type="number" required placeholder="Enter Rows Count"
                                formControlName="rowsCount">
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1" *ngIf="modelTitle=='Edit' || modelTitle=='View'">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Created By</mat-label>
                            <input class="inputUppercase" matInput readonly required placeholder="Enter Created By" formControlName="createdBy">
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
            </mat-grid-list>
            <!-- <mat-grid-list *ngIf="(jobForm.value.jobType=='table' && (jobForm.value.filters) && (modelTitle=='Create' || (modelTitle=='Edit'))" cols="7" rowHeight="90px">
                <mat-grid-tile colspan="2">
                    <div class="form-container">
                        <button mat-raised-button color="primary" (click)="addFilterForm()">
                            <mat-icon>add</mat-icon>Filter
                        </button>
                    </div>
                </mat-grid-tile>
            </mat-grid-list> -->

            <div *ngIf="jobForm.value.jobType=='table'" formArrayName="filters">
                <mat-grid-list cols="7" rowHeight="90px"
                    *ngFor="let filter of jobForm.controls.filters.controls; let i=index; last as last; first as first"
                    formGroupName="{{i}}">
                    <!-- <mat-grid-tile colspan="2">
                        <div class="form-container">
                            <button mat-raised-button color="primary" (click)="addFilterForm()">
                                <mat-icon>add</mat-icon>Filter
                            </button>
                        </div>
                    </mat-grid-tile> -->
                    <mat-grid-tile colspan="2">
                        <div class="form-container">
                            <mat-form-field [hideRequiredMarker]="false" appearance="outline">
                                <mat-label> Filter Options </mat-label>
                                <mat-select formControlName="columnName">
                                    <mat-option *ngFor="let column of jobForm.value.columns" [value]="column">{{column}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="2">
                        <div class="form-container">
                            <mat-form-field [hideRequiredMarker]="false" appearance="outline">
                                <mat-label> Operator </mat-label>
                                <mat-select formControlName="operator">
                                    <mat-option value="<"> < </mat-option>
                                    <mat-option value=">"> > </mat-option>
                                    <mat-option value="<="> <= </mat-option>
                                    <mat-option value=">="> >= </mat-option>
                                    <mat-option value="="> = </mat-option>
                                    <mat-option value="<>"> <> </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="2">
                        <div class="form-container">
                            <mat-form-field appearance="outline">
                                <mat-label>Value</mat-label>
                                <input matInput type="number" placeholder="Enter Value" formControlName="columnValue">
                            </mat-form-field>
                        </div>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="1" style="margin-top: -8px">
                        <button mat-icon-button color="warn" (click)="removeFilter(i)">
                            <mat-icon>close</mat-icon>
                        </button>
                        <button *ngIf="last" mat-icon-button color="primary" (click)="addFilterForm()">
                            <mat-icon>add</mat-icon>
                        </button>
                    </mat-grid-tile>
                    </mat-grid-list>
            </div>
            <!-- <mat-grid-list *ngIf="modelTitle=='Edit' || modelTitle=='View'" cols="2" rowHeight="90px">
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Created By</mat-label>
                            <input class="inputUppercase" matInput readonly required placeholder="Enter Created By" formControlName="createdBy">
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
            </mat-grid-list> -->

        </mat-dialog-content>
        <mat-dialog-actions *ngIf="modelTitle!='View'" align="end">
            <button mat-raised-button color="primary"
                (click)="jobDataPerview(1,JobDataPerviewDialog);" style="margin-right: 7px;"><mat-icon>remove_red_eye</mat-icon>Preview</button>
            <button [disabled]="!jobForm.valid" mat-raised-button matDialogClose color="primary"
                (click)="createUpdateJob();" style="margin-right: 7px;">Submit</button>
        </mat-dialog-actions>
    </form>
</ng-template>


<ng-template #jobExecDeleteDialog>
    <span>
        <button style="float:right;" class="close" mat-button matDialogClose>
            <mat-icon>close</mat-icon>
        </button>
    </span>
    <!-- <h1 mat-dialog-title style="text-align: center;">Are you sure, you want to <b> {{ modelTitle +' '+ selectedJobData.jobName }} </b> ?</h1> -->
    <h1 mat-dialog-title style="text-align: center;"> <b>{{ modelTitle }} </b></h1>
    <div mat-dialog-content style="text-align: center;" *ngIf="jobExeStep=='1'">
        <p>Are you sure, you want to {{ modelTitle | lowercase }} <b>{{ selectedJobData.name+'?' }} </b></p>
    </div>

    <div *ngIf="jobExeStep=='2'">
        <mat-grid-list cols="2" rowHeight="90px">
            <mat-grid-tile colspan="1">
                <div class="form-container">
                    <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                        <mat-label> User Id </mat-label>
                        <input matInput required placeholder="Enter User Id" [(ngModel)]="sapUserId">
                    </mat-form-field>
                </div>
            </mat-grid-tile>
            <mat-grid-tile colspan="1">
                <div class="form-container">
                    <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                        <mat-label> Password </mat-label>
                        <!-- <input type="password" matInput required placeholder="Enter Password" [(ngModel)]="sapPassword"> -->
                        <input matInput required [type]="hide ? 'password' : 'text'" placeholder="Enter Password"
                        [(ngModel)]="sapPassword">
                        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                            [attr.aria-pressed]="hide">
                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
        <p *ngIf="tableCredInvalid" style="text-align: center; color: red;"> Invalid Credentials </p>

    </div>

    <br><br>
    <div mat-dialog-actions align="center">
        <div *ngIf="jobExeStep=='1'">
            <button mat-raised-button matDialogClose color="primary" *ngIf="modelTitle=='Delete'"
                (click)="deleteJob()"> Yes</button>
            <button mat-raised-button  color="primary" *ngIf="modelTitle=='Execute'"
                (click)="userRole=='BUSINESS'? jobExeStep='2' : jobExeStep='3'"> Yes</button>
                <!-- executeJob() -->
            <button mat-raised-button matDialogClose color="warn" cdkFocusInitial >No</button>
        </div>

        <button *ngIf="jobExeStep=='2'" mat-raised-button color="primary"
        (click)="tableExecuteRoleCheck()"> Submit </button>

        <div *ngIf="jobExeStep=='3'">
            <button mat-raised-button matDialogClose color="primary"
                (click)="executeMethod('Foreground', ForegroundLogsDialog)"> Foreground</button>
            <button mat-raised-button matDialogClose color="primary"
                (click)="executeMethod('Background', ForegroundLogsDialog)"> Background</button>
                <!-- executeMethod('Background', ForegroundLogsDialog) -->
        </div>
    </div>
</ng-template>


<ng-template #executeBapiDialog>
    <span>
        <button style="float:right;" class="close" mat-button matDialogClose>
            <mat-icon>close</mat-icon>
        </button>
    </span>
    <h2 *ngIf="modelTitle!='Credentials'" matDialogTitle style="text-align: center;"><b> BAPI {{ modelTitle }}</b></h2>
    <h2 *ngIf="modelTitle=='Credentials'" matDialogTitle style="text-align: center;"><b> SAP {{ modelTitle }}</b></h2>
    
        <mat-dialog-content>
            <div *ngIf="modelTitle=='Parameters'">
                <form [formGroup]="bapiExcuteForm">
                    <mat-grid-list cols="2" rowHeight="90px" *ngIf="bapiExecuteParameters.length!=0">
                        <mat-grid-tile colspan="1" *ngFor="let param of bapiExecuteParameters">
                            <div class="form-container">
                                <mat-form-field appearance="outline">
                                    <mat-label>{{ param.paramName }}</mat-label>
                                    <input matInput [placeholder]="'Enter '+param.paramName" [formControlName]="param.paramName"
                                        [value]="param.defaultValue">
                                </mat-form-field>
                            </div>
                        </mat-grid-tile>
                    </mat-grid-list>
                </form>
                <p *ngIf="bapiExecuteParameters.length==0" style="text-align: center;">
                    No parameters available for this BAPI Job
                </p>
            </div>
        
            <div *ngIf="modelTitle=='Credentials'">
                <mat-grid-list cols="2" rowHeight="90px">
                    <mat-grid-tile colspan="1">
                        <div class="form-container">
                            <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                                <mat-label> User Id </mat-label>
                                <input matInput required placeholder="Enter User Id" [(ngModel)]="sapUserId">
                            </mat-form-field>
                        </div>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="1">
                        <div class="form-container">
                            <mat-form-field [hideRequiredMarker]="true" appearance="outline">
                                <mat-label> Password </mat-label>
                                <!-- <input type="password" matInput required placeholder="Enter Password" [(ngModel)]="sapPassword"> -->
                                <input matInput required [type]="hide ? 'password' : 'text'" placeholder="Enter Password"
                                [(ngModel)]="sapPassword">
                                <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                                    [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                </button>
                            </mat-form-field>
                        </div>
                    </mat-grid-tile>
                </mat-grid-list>
                <p *ngIf="!sapCredentials" style="text-align: center; color: red;"> Invalid Credentials </p>
            </div>
            
        
            <div *ngIf="modelTitle=='Table and Export Parameters'">
                <mat-tab-group>
                    <mat-tab label="Tables">
                        <mat-grid-list cols="2" rowHeight="50px">
                            <mat-grid-tile *ngFor="let table of bapiExportTable" colspan="1">
                                <div class="form-container">
                                    {{ table }}
                                </div>
                            </mat-grid-tile>
                            <mat-grid-tile *ngIf="bapiExportTable.length==0  && !paramLoader" colspan="2">
                                <p>No tables available</p>
                            </mat-grid-tile>
                        </mat-grid-list>
                    </mat-tab>
                    <mat-tab label="Export Parameters">
                        <div *ngFor="let param of bapiExportParams; let i = index;">
                            <h4>
                                {{ param.exportparamName }}
                            </h4>
                            <mat-grid-list cols="2" rowHeight="50px">
                                <mat-grid-tile *ngFor="let value of param.exportparamValues" colspan="1">
                                    <div class="form-container">
                                        {{ value }}
                                    </div>
                                </mat-grid-tile>
                                <mat-grid-tile *ngIf="param.exportparamValues.length==0 && !paramLoader" colspan="2">
                                    <p>No values available</p>
                                </mat-grid-tile>
                            </mat-grid-list>
                            <mat-divider *ngIf="i!=bapiExportParams.length-1" style="color:grey;"></mat-divider>
                        </div>
                        <div *ngIf="bapiExportParams.length==0">
                            <p style="text-align: center;">No parameters available</p>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
            <img *ngIf="paramLoader" src="../assets/loader.gif" class="loader">
        </mat-dialog-content>

    <div mat-dialog-actions align="end">
        <button *ngIf="modelTitle=='Parameters'" mat-raised-button color="primary"
            (click)="bapiExecuteRole()"> Submit </button>
        <button *ngIf="modelTitle=='Credentials'" [disabled]="!(sapUserId!='' && sapPassword!='')" mat-raised-button color="primary" (click)="getBapiTableParameters()">
            Submit</button>
        <button *ngIf="(modelTitle=='Table and Export Parameters' && bapiExportTable.length!=0)" mat-raised-button color="primary"
            (click)="downloadBapiExecute()"> Download</button>
    </div>
</ng-template>

<ng-template  #ForegroundLogsDialog>
    <span>
        <!-- *ngIf="jobLogsClose" -->
        <button  style="float:right;" class="close" mat-button matDialogClose ><mat-icon>close</mat-icon></button>
    </span>
    <h2 matDialogTitle style="text-align: center;"><b> {{ selectedJobData.name | uppercase }} Job</b></h2>
    <mat-dialog-content >
        <!-- <img *ngIf="logLoader" src="../assets/loader.gif" class="loader"> -->
        <p *ngFor="let log of jobLogs; let i = index">
            {{i+1}}. {{log}}
        </p>
    </mat-dialog-content>
</ng-template>

<ng-template  #JobDataPerviewDialog>
    <span>
        <button  style="float:right;" class="close" mat-button matDialogClose ><mat-icon>close</mat-icon></button>
    </span>
    <h2 matDialogTitle style="text-align: center;"><b> Preview Job</b></h2>
    <mat-dialog-content>
        <div class="table-responsive" *ngIf="previewShow">
            <mat-table [dataSource]="previewData" matSort>
                <ng-container *ngFor="let column of previewTableHeaders" matColumnDef="{{column}}" sticky>
                    <mat-header-cell *matHeaderCellDef style="color: #2368a0;"> {{ column }} </mat-header-cell>
                    <mat-cell *matCellDef="let object"> {{ object[column]!=''? object[column] : '-'}} </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="previewTableHeaders"></mat-header-row>
                <mat-header-row mat-row *matRowDef="let row; columns: previewTableHeaders;">
                </mat-header-row>
            </mat-table>
        </div>
        <img *ngIf="!previewShow" src="../assets/loader.gif" class="loader">
        <mat-paginator #PreviewPageinator="matPaginator" [hidePageSize]=true [pageSize]="6" showFirstLastButtons>
        </mat-paginator>
    </mat-dialog-content>
</ng-template>

<ng-template #AddNewCategoey >
    <span>
        <button style="float:right;" class="close" mat-button matDialogClose>
            <mat-icon>close</mat-icon>
        </button>
    </span>
    <h2 matDialogTitle style="text-align: center;"><b> Add Category</b></h2>
    <!-- <img *ngIf="modelloader" src="../assets/loader.gif" class="loader"> -->
    <form [formGroup]="categoryForm">
        <mat-dialog-content>
            <mat-grid-list cols="2" rowHeight="90px">
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Category Name</mat-label>
                            <input class="inputUppercase" matInput required placeholder="Enter Category Name" formControlName="catergoryName">
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Category Type</mat-label>
                            <mat-select required formControlName="categoryType" >
                                <mat-option value="EXTRACTOR"> EXTRACTOR </mat-option>
                                <mat-option value="TABLE"> TABLE </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="2" rowHeight="120px">
                <mat-grid-tile colspan="2">
                    <div class="form-container">
                        <mat-form-field appearance="outline">
                            <mat-label>Description</mat-label>
                            <textarea class="inputUppercase" matInput required placeholder="Enter Description" formControlName="categoryDescription"></textarea>
                        </mat-form-field>
                    </div>
                </mat-grid-tile>
            </mat-grid-list>
        </mat-dialog-content>
        <mat-dialog-actions *ngIf="modelTitle!='View'" align="end">
            <button mat-raised-button matDialogClose color="warn" style="margin-right: 7px;">Cancel</button>
            <button [disabled]="!categoryForm.valid" mat-raised-button matDialogClose color="primary"
                (click)="addNewCategory();" style="margin-right: 7px;">Submit</button>
        </mat-dialog-actions>
    </form>
</ng-template>

<!-- <div *ngIf="foregroundLoader" class="overlay-loader">
    <div class="text">
        <p> Job execution is going on...! </p>
    </div>
</div> -->